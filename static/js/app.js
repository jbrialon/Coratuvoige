webpackJsonp([2,0],{0:function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var n=r(47),a=i(n),s=r(116),d=i(s),o=r(124),c=i(o),l=r(49),u=i(l),f=r(!function(){var e=new Error('Cannot find module "element-ui"');throw e.code="MODULE_NOT_FOUND",e}()),v=i(f);r(!function(){var e=new Error('Cannot find module "element-ui/lib/theme-default/index.css"');throw e.code="MODULE_NOT_FOUND",e}());var m=r(!function(){var e=new Error('Cannot find module "element-ui/lib/locale/lang/en"');throw e.code="MODULE_NOT_FOUND",e}()),p=i(m);a.default.use(v.default,{locale:p.default}),a.default.use(c.default);var _=new c.default({routes:u.default});new a.default({el:"#app",template:"<App/>",router:_,components:{App:d.default}})},13:function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.dbRidesRef=t.dbDriversRef=t.dbConfigRef=t.firebaseDB=t.firebaseApp=void 0;var n=r(47),a=i(n),s=r(125),d=i(s),o=r(89),c=i(o);a.default.use(d.default);var l=t.firebaseApp=c.default.initializeApp({apiKey:"AIzaSyBJrsysCANrrrvvaZsHQ5JCVFtuefmwgiw",authDomain:"coratuvoige.firebaseapp.com",databaseURL:"https://coratuvoige.firebaseio.com",storageBucket:"coratuvoige.appspot.com",messagingSenderId:"420022212127"});t.firebaseDB=l.database(),t.dbConfigRef=l.database().ref("/config"),t.dbDriversRef=l.database().ref("/drivers"),t.dbRidesRef=l.database().ref("/rides")},49:function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(119),a=i(n),s=r(118),d=i(s),o=[{path:"/",name:"Home",component:a.default},{path:"/driver/:id",name:"driver",component:d.default}];t.default=o},50:function(e,t,r){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0});var n=r(13),a=i(n);t.default={name:"app",firebase:{config:{source:a.dbConfigRef,asObject:!0}}}},51:function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(55),a=i(n),s=r(!function(){var e=new Error('Cannot find module "date-fns/parse"');throw e.code="MODULE_NOT_FOUND",e}()),d=i(s),o=r(!function(){var e=new Error('Cannot find module "date-fns/format"');throw e.code="MODULE_NOT_FOUND",e}()),c=i(o),l=r(!function(){var e=new Error('Cannot find module "date-fns/get_month"');throw e.code="MODULE_NOT_FOUND",e}()),u=i(l);t.default={name:"rideList",props:{drivers:{type:Array},rides:{type:Array}},computed:{tableData:function(){var e=this;return this.rides.map(function(t){var r=t.passengers.map(function(t){return{id:t,name:e.getDriverNamePerId(t)}}),i={id:t.driver,name:e.getDriverNamePerId(t.driver),candrive:t.driver.candrive};return{key:t[".key"],date:(0,c.default)(t.date,"YYYY-MM-DD"),passengers:r,driver:i}})},filterDates:function(){var e=[].concat((0,a.default)(Array(12).keys()));return e.map(function(e){var t=new Date(2017,e,1);return{text:(0,c.default)(t,"MMMM YYYY"),value:t}})},filterDrivers:function(){return this.drivers.filter(function(e){return e.candrive}).map(function(e){return{text:e.name,value:e.id}})}},methods:{filterDate:function(e,t){return(0,u.default)((0,d.default)(t.date))===(0,u.default)((0,d.default)(e))},filterDriver:function(e,t){return e===t.driver.id},getDriverNamePerId:function(e){return void 0!==e?this.drivers[e].name:""},remove:function(e){this.$emit("remove",e)}}}},52:function(e,t,r){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0});var n=r(13),a=i(n);t.default={name:"driver",data:function(){return{id:this.$route.params.id}},computed:{driverName:function(){return void 0!==this.drivers[this.id]?this.drivers[this.id].name:""},ridesAsDriver:function(){var e=this;return this.rides.map(function(t){if(console.log(t.driver),t.driver===e.id)return t})},ridesAsPassengers:function(){var e=this;return this.rides.map(function(t){if(t.passengers.includes(e.id))return t})}},firebase:{drivers:{source:a.dbDriversRef},rides:{source:a.dbRidesRef}}}},53:function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0});var a=r(13),s=n(a),d=r(114),o=i(d),c=r(113),l=i(c),u=r(117),f=i(u);t.default={name:"home",components:{rideList:f.default},data:function(){return{newRide:{driver:"",checkbox:{},date:new Date}}},computed:{canSubmit:function(){console.log("canSubmit");var e=""!==this.newRide.driver,t=!(0,l.default)(this.newRide.checkbox),r=this.newRide.date;return e&&t&&r}},methods:{add:function(){var e={driver:this.newRide.driver,passengers:(0,o.default)(this.newRide.checkbox),date:this.newRide.date.toString()};this.canSubmit&&s.dbRidesRef.push(e)},getDriverNamePerId:function(e){return void 0!==e?this.drivers[e].name:""},remove:function(e){var t=this;this.$confirm("Fais pas le con Philippe ! t'es sÃ»r ?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then(function(){s.dbRidesRef.child(e).remove(),t.$message({type:"success",message:"Delete completed"})}).catch(function(){t.$message({type:"info",message:"Delete canceled"})})},isDriving:function(e){return""!==this.newRide.driver&&this.newRide.driver===e}},watch:{"newRide.driver":function(e){delete this.newRide.checkbox[e]}},firebase:{drivers:{source:s.dbDriversRef},rides:{source:s.dbRidesRef}}}},82:function(e,t){},83:function(e,t){},84:function(e,t){},85:function(e,t){},86:function(e,t){},116:function(e,t,r){r(84);var i=r(12)(r(50),r(122),null,null);e.exports=i.exports},117:function(e,t,r){r(82);var i=r(12)(r(51),r(120),"data-v-308ea290",null);e.exports=i.exports},118:function(e,t,r){r(83);var i=r(12)(r(52),r(121),null,null);e.exports=i.exports},119:function(e,t,r){r(86),r(85);var i=r(12)(r(53),r(123),"data-v-67458b65",null);e.exports=i.exports},120:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"ride-list"},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"","default-sort":{prop:"date",order:"descending"}}},[r("el-table-column",{attrs:{prop:"date",label:"Date",width:"150",sortable:"",filters:e.filterDates,"filter-method":e.filterDate,"filter-multiple":!1}}),e._v(" "),r("el-table-column",{attrs:{prop:"driver",label:"Driver",filters:e.filterDrivers,"filter-method":e.filterDriver,"filter-multiple":!1},scopedSlots:{default:function(t){return[e._v("\n        "+e._s(t.row.driver.name)+"\n      ")]}}}),e._v(" "),r("el-table-column",{attrs:{prop:"passengers",label:"Passengers"},scopedSlots:{default:function(t){return e._l(t.row.passengers,function(t){return r("router-link",{attrs:{to:{name:"driver",params:{id:t.id}}}},[e._v(e._s(t.name)+"Â ")])})}}}),e._v(" "),r("el-table-column",{attrs:{label:"Action",width:"100"},scopedSlots:{default:function(t){return[r("button",{staticClass:"btn btn-floating"},[r("i",{staticClass:"el-icon-delete",on:{click:function(r){e.remove(t.row.key)}}})])]}}})],1)],1)},staticRenderFns:[]}},121:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"row"},[e._v("\n  "+e._s(e.driverName)+" "+e._s(this.id)+"\n\n  "),r("pre",[e._v(" "+e._s(e.ridesAsDriver)+" ")])])},staticRenderFns:[]}},122:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container",attrs:{id:"app"}},[r("div",{staticClass:"row"},[r("div",{staticClass:"col.m6.offset-m3.s12"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col s12 align-center center-align"},[r("h2",[e._v("\n            "+e._s(e.config.name)+" ðŸš—ðŸ’¨\n          ")])])])]),e._v(" "),r("router-view")],1)])},staticRenderFns:[]}},123:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"row"},[r("div",{staticClass:"col m8 offset-m2 s12"},[r("div",{staticClass:"row"},[e._m(0),e._v(" "),r("div",{staticClass:"input-field col m6 s12"},[r("select",{directives:[{name:"model",rawName:"v-model",value:e.newRide.driver,expression:"newRide.driver"}],on:{change:function(t){e.newRide.driver=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t})[0]}}},e._l(e.drivers,function(t){return r("option",{attrs:{disabled:0===t.candrive},domProps:{value:t.id}},[e._v(e._s(t.name))])}))])]),e._v(" "),r("div",{staticClass:"row"},e._l(e.drivers,function(t){return r("div",{staticClass:"input-field col m2"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.newRide.checkbox[t.id],expression:"newRide.checkbox[driver.id]"}],staticClass:"filled-in",attrs:{type:"checkbox",id:t.name,disabled:e.isDriving(t.id)},domProps:{checked:Array.isArray(e.newRide.checkbox[t.id])?e._i(e.newRide.checkbox[t.id],null)>-1:e.newRide.checkbox[t.id]},on:{click:function(r){var i=e.newRide.checkbox[t.id],n=r.target,a=!!n.checked;if(Array.isArray(i)){var s=null,d=e._i(i,s);a?d<0&&(e.newRide.checkbox[t.id]=i.concat(s)):d>-1&&(e.newRide.checkbox[t.id]=i.slice(0,d).concat(i.slice(d+1)))}else e.newRide.checkbox[t.id]=a}}}),e._v(" "),r("label",{attrs:{for:t.name}},[e._v(e._s(t.name))])])})),e._v(" "),r("div",{staticClass:"row row--datepicker"},[r("div",{staticClass:"input-field col m8 s12"},[r("el-date-picker",{directives:[{name:"model",rawName:"v-model",value:e.newRide.date,expression:"newRide.date"}],attrs:{size:"large",type:"date",format:"yyyy-MM-dd",placeholder:"date",id:"first_name"},domProps:{value:e.newRide.date},on:{input:function(t){e.newRide.date=t}}})],1),e._v(" "),r("div",{staticClass:"col m4 s12"},[r("a",{staticClass:"btn-floating btn-large waves-effect waves-light red",class:{disabled:!e.canSubmit},on:{click:function(t){e.add()}}},[r("i",{staticClass:"material-icons"},[e._v("add")])])])]),e._v(" "),r("rideList",{attrs:{drivers:e.drivers,rides:e.rides},on:{remove:e.remove}})],1)])},staticRenderFns:[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"input-field col m6 s12"},[r("label",{attrs:{for:"first_name"}},[e._v("Driver: ")])])}]}}});
//# sourceMappingURL=app.js.map