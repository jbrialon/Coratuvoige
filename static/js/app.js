webpackJsonp([2,0],{0:function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var n=r(3),a=i(n),s=r(172),o=i(s),d=r(184),u=i(d),c=r(86),l=i(c),f=r(145),v=i(f);r(159);var p=r(148),m=i(p);a.default.use(v.default,{locale:m.default}),a.default.use(u.default);var b=new u.default({routes:l.default});new a.default({el:"#app",template:"<App/>",router:b,components:{App:o.default}})},11:function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.dbRidesRef=t.dbDriversRef=t.dbConfigRef=t.firebaseDB=t.firebaseApp=void 0;var n=r(3),a=i(n),s=r(185),o=i(s),d=r(169),u=i(d);a.default.use(o.default);var c=t.firebaseApp=u.default.initializeApp({apiKey:"AIzaSyBJrsysCANrrrvvaZsHQ5JCVFtuefmwgiw",authDomain:"coratuvoige.firebaseapp.com",databaseURL:"https://coratuvoige.firebaseio.com",storageBucket:"coratuvoige.appspot.com",messagingSenderId:"420022212127"});t.firebaseDB=c.database(),t.dbConfigRef=c.database().ref("/config"),t.dbDriversRef=c.database().ref("/drivers"),t.dbRidesRef=c.database().ref("/rides")},37:function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function n(e){var t,r=e.map(function(e){var t=e.passengers,r=e.driver,i=l.RIDE_PRICE/t.length;return t.map(function(e){return[e,r,i]})});return(t=Array.prototype).concat.apply(t,(0,c.default)(r))}function a(e){var t=e.reduce(function(e,t){var r=(0,d.default)(t,3),i=r[0],n=r[1],a=r[2],s=parseFloat(a),o=e.find(function(e){return e.id===i}),u=e.find(function(e){return e.id===n});return o?o.value-=s:e.push({id:i,value:-s}),u?u.value+=s:e.push({id:n,value:+s}),e},[]).sort(function(e,t){return e.value<t.value?1:-1}),r=t.filter(function(e){return e.value<0}).map(function(e){return{id:e.id,value:Math.abs(e.value)}}),i=t.filter(function(e){return e.value>0}),n=[];return i.forEach(function(e){for(var t=0;t<r.length;t++){var i=r[t],a=i.value,s=e.value,o=Math.min(a,s);if(e.value=s-o,i.value=a-o,0!==o&&n.push([i.id,e.id,o]),0===e.value)break}}),n}function s(e,t){return void 0!==t?e[t].name:""}Object.defineProperty(t,"__esModule",{value:!0});var o=r(96),d=i(o),u=r(38),c=i(u);t.getTransactionsFromRide=n,t.simplifyTransations=a,t.getDriverNamePerId=s;var l=r(85)},85:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.RIDE_PRICE=22.7},86:function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(176),a=i(n),s=r(175),o=i(s),d=r(177),u=i(d),c=[{path:"/",name:"Home",component:a.default},{path:"/driver/:id",name:"driver",component:o.default},{path:"/payment",name:"payment",component:u.default}];t.default=c},87:function(e,t,r){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0});var n=r(11),a=i(n);t.default={name:"app",firebase:{config:{source:a.dbConfigRef,asObject:!0}}}},88:function(e,t,r){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0});var n=r(11),a=i(n),s=r(37);t.default={name:"rideList",props:{transactions:{type:Array}},computed:{tableData:function(){var e=this;return this.transactions.map(function(t){return{debtor:(0,s.getDriverNamePerId)(e.drivers,t[0]),creditor:(0,s.getDriverNamePerId)(e.drivers,t[1]),debt:t[2].toFixed(2)}})}},firebase:{drivers:{source:a.dbDriversRef}}}},89:function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(38),a=i(n),s=r(5),o=i(s),d=r(127),u=i(d),c=r(130),l=i(c);t.default={name:"rideList",props:{drivers:{type:Array},rides:{type:Array}},computed:{tableData:function(){var e=this;return this.rides.map(function(t){var r=t.passengers.map(function(t){return{id:t,name:e.getDriverNamePerId(t)}}),i={id:t.driver,name:e.getDriverNamePerId(t.driver),candrive:t.driver.candrive};return{key:t[".key"],date:(0,u.default)(t.date,"YYYY-MM-DD"),passengers:r,driver:i}})},filterDates:function(){var e=[].concat((0,a.default)(Array(12).keys()));return e.map(function(e){var t=new Date(2017,e,1);return{text:(0,u.default)(t,"MMMM YYYY"),value:t}})},filterDrivers:function(){return this.drivers.filter(function(e){return e.candrive}).map(function(e){return{text:e.name,value:e.id}})}},methods:{filterDate:function(e,t){return(0,l.default)((0,o.default)(t.date))===(0,l.default)((0,o.default)(e))},filterDriver:function(e,t){return e===t.driver.id},getDriverNamePerId:function(e){return void 0!==e?this.drivers[e].name:""},remove:function(e){this.$emit("remove",e)}}}},90:function(e,t,r){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0});var n=r(11),a=i(n);t.default={name:"driver",data:function(){return{id:this.$route.params.id}},computed:{driverName:function(){return void 0!==this.drivers[this.id]?this.drivers[this.id].name:""},ridesAsDriver:function(){var e=this;return this.rides.map(function(t){if(console.log(t.driver),t.driver===e.id)return t})},ridesAsPassengers:function(){var e=this;return this.rides.map(function(t){if(t.passengers.includes(e.id))return t})}},firebase:{drivers:{source:a.dbDriversRef},rides:{source:a.dbRidesRef}}}},91:function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0});var a=r(11),s=n(a),o=r(174),d=i(o);t.default={name:"home",components:{rideList:d.default},data:function(){return{newRide:{driver:"",checkbox:[],date:new Date}}},computed:{canSubmit:function(){var e=""!==this.newRide.driver,t=this.newRide.checkbox.length>0,r=this.newRide.date;return e&&t&&r}},methods:{add:function(){var e={driver:this.newRide.driver,passengers:this.newRide.checkbox,date:this.newRide.date.toString()};this.canSubmit&&s.dbRidesRef.push(e)},getDriverNamePerId:function(e){return void 0!==e?this.drivers[e].name:""},remove:function(e){var t=this;this.$confirm("Fais pas le con Philippe ! t'es sûr ?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then(function(){s.dbRidesRef.child(e).remove(),t.$message({type:"success",message:"Delete completed"})}).catch(function(){t.$message({type:"info",message:"Delete canceled"})})},isDriving:function(e){return""!==this.newRide.driver&&this.newRide.driver===e}},watch:{"newRide.driver":function(e){var t=this.newRide.checkbox.indexOf(e);t>-1&&this.newRide.checkbox.splice(e,1)}},firebase:{drivers:{source:s.dbDriversRef},rides:{source:s.dbRidesRef}}}},92:function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0});var a=r(11),s=n(a),o=r(37),d=r(173),u=i(d);t.default={name:"payment",components:{paymentList:u.default},computed:{transactions:function(){return(0,o.getTransactionsFromRide)(this.rides)},simplifiedTransactions:function(){return(0,o.simplifyTransations)(this.transactions)}},firebase:{drivers:{source:s.dbDriversRef},rides:{source:s.dbRidesRef}}}},159:function(e,t){},160:function(e,t){},161:function(e,t){},162:function(e,t){},163:function(e,t){},164:function(e,t){},165:function(e,t){},166:function(e,t){},172:function(e,t,r){r(163);var i=r(10)(r(87),r(181),null,null);e.exports=i.exports},173:function(e,t,r){r(160);var i=r(10)(r(88),r(178),"data-v-2e8414d4",null);e.exports=i.exports},174:function(e,t,r){r(161);var i=r(10)(r(89),r(179),"data-v-308ea290",null);e.exports=i.exports},175:function(e,t,r){r(162);var i=r(10)(r(90),r(180),null,null);e.exports=i.exports},176:function(e,t,r){r(165),r(164);var i=r(10)(r(91),r(182),"data-v-67458b65",null);e.exports=i.exports},177:function(e,t,r){r(166);var i=r(10)(r(92),r(183),null,null);e.exports=i.exports},178:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"ride-list"},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""}},[r("el-table-column",{attrs:{prop:"debtor",label:"Debtor"}}),e._v(" "),r("el-table-column",{attrs:{prop:"creditor",label:"Creditor"}}),e._v(" "),r("el-table-column",{attrs:{prop:"debt",label:"Debt"}})],1)],1)},staticRenderFns:[]}},179:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"ride-list"},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"","default-sort":{prop:"date",order:"descending"}}},[r("el-table-column",{attrs:{prop:"date",label:"Date",width:"150",sortable:"",filters:e.filterDates,"filter-method":e.filterDate,"filter-multiple":!1}}),e._v(" "),r("el-table-column",{attrs:{prop:"driver",label:"Driver",filters:e.filterDrivers,"filter-method":e.filterDriver,"filter-multiple":!1},scopedSlots:{default:function(t){return[e._v("\n        "+e._s(t.row.driver.name)+"\n      ")]}}}),e._v(" "),r("el-table-column",{attrs:{prop:"passengers",label:"Passengers"},scopedSlots:{default:function(t){return e._l(t.row.passengers,function(t){return r("router-link",{attrs:{to:{name:"driver",params:{id:t.id}}}},[e._v(e._s(t.name)+" ")])})}}}),e._v(" "),r("el-table-column",{attrs:{label:"Action",width:"100"},scopedSlots:{default:function(t){return[r("button",{staticClass:"btn btn-floating"},[r("i",{staticClass:"el-icon-delete",on:{click:function(r){e.remove(t.row.key)}}})])]}}})],1)],1)},staticRenderFns:[]}},180:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"row"},[e._v("\n  "+e._s(e.driverName)+" "+e._s(this.id)+"\n\n  "),r("pre",[e._v(" "+e._s(e.ridesAsDriver)+" ")])])},staticRenderFns:[]}},181:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container",attrs:{id:"app"}},[r("div",{staticClass:"row"},[r("div",{staticClass:"col.m6.offset-m3.s12"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col s12 align-center center-align"},[r("h2",[e._v("\n            "+e._s(e.config.name)+" 🚗💨\n          ")])])])]),e._v(" "),r("router-view")],1)])},staticRenderFns:[]}},182:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"row"},[r("div",{staticClass:"col m8 offset-m2 s12"},[r("div",{staticClass:"row"},[e._m(0),e._v(" "),r("div",{staticClass:"input-field col m6 s12"},[r("select",{directives:[{name:"model",rawName:"v-model",value:e.newRide.driver,expression:"newRide.driver"}],on:{change:function(t){e.newRide.driver=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t})[0]}}},e._l(e.drivers,function(t){return r("option",{attrs:{disabled:0===t.candrive},domProps:{value:t.id}},[e._v(e._s(t.name))])}))])]),e._v(" "),r("div",{staticClass:"row"},e._l(e.drivers,function(t){return r("div",{staticClass:"input-field col m2"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.newRide.checkbox,expression:"newRide.checkbox"}],staticClass:"filled-in",attrs:{type:"checkbox",id:t.name,disabled:e.isDriving(t.id)},domProps:{value:t.id,checked:Array.isArray(e.newRide.checkbox)?e._i(e.newRide.checkbox,t.id)>-1:e.newRide.checkbox},on:{click:function(r){var i=e.newRide.checkbox,n=r.target,a=!!n.checked;if(Array.isArray(i)){var s=t.id,o=e._i(i,s);a?o<0&&(e.newRide.checkbox=i.concat(s)):o>-1&&(e.newRide.checkbox=i.slice(0,o).concat(i.slice(o+1)))}else e.newRide.checkbox=a}}}),e._v(" "),r("label",{attrs:{for:t.name}},[e._v(e._s(t.name))])])})),e._v(" "),r("div",{staticClass:"row row--datepicker"},[r("div",{staticClass:"input-field col m8 s12"},[r("el-date-picker",{directives:[{name:"model",rawName:"v-model",value:e.newRide.date,expression:"newRide.date"}],attrs:{size:"large",type:"date",format:"yyyy-MM-dd",placeholder:"date",id:"first_name"},domProps:{value:e.newRide.date},on:{input:function(t){e.newRide.date=t}}})],1),e._v(" "),r("div",{staticClass:"col m4 s12"},[r("a",{staticClass:"btn-floating btn-large waves-effect waves-light red",class:{disabled:!e.canSubmit},on:{click:function(t){e.add()}}},[r("i",{staticClass:"material-icons"},[e._v("add")])])])]),e._v(" "),r("rideList",{attrs:{drivers:e.drivers,rides:e.rides},on:{remove:e.remove}})],1)])},staticRenderFns:[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"input-field col m6 s12"},[r("label",{attrs:{for:"first_name"}},[e._v("Driver: ")])])}]}},183:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"row"},[r("paymentList",{attrs:{transactions:e.simplifiedTransactions}})],1)},staticRenderFns:[]}}});
//# sourceMappingURL=app.js.map